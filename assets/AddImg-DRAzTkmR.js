import{n as V,t as R,u as ae,f as ze,g as Ke,h as Re,i as Te,j as E,k as qe,p as re,l as Be,m as N,q as L,s as ne,v as q,r as _,x as te,y as he,z as we,A as le,B as _e,o as ye,C as Je,D as Qe,P as et,b as s,T as tt,F as ot,E as be,G as j,H as at,J as fe,K as ge,L as Ae,I as X,M as de,O as nt,Q as G,R as lt,S as it,U as ve,V as st,W as Le,X as De,Y as ct,Z as oe,$ as Z,a0 as rt,a1 as Ue,a2 as ut,a3 as dt,a4 as vt,a5 as Ee,a6 as K,a7 as mt,a8 as Me,a9 as ft,aa as Fe,ab as gt,ac as ht,_ as wt,a as yt,c as bt,N as Ct}from"./index-DvMjalLo.js";import{u as It,O as kt,L as Ce,a as St}from"./axios-DHZRXgag.js";let Ot=2e3;const Pt=()=>++Ot,xt={show:Boolean,zIndex:V,overlay:R,duration:V,teleport:[String,Object],lockScroll:R,lazyRender:R,beforeClose:Function,overlayStyle:Object,overlayClass:ae,transitionAppear:Boolean,closeOnClickOverlay:R};let Q=0;const Ie="van-overflow-hidden";function pt(e,o){const a=ze(),t="01",l="10",c=r=>{a.move(r);const u=a.deltaY.value>0?l:t,v=qe(r.target,e.value),{scrollHeight:y,offsetHeight:k,scrollTop:A}=v;let S="11";A===0?S=k>=y?"00":"01":A+k>=y&&(S="10"),S!=="11"&&a.isVertical()&&!(parseInt(S,2)&parseInt(u,2))&&re(r,!0)},w=()=>{document.addEventListener("touchstart",a.start),document.addEventListener("touchmove",c,{passive:!1}),Q||document.body.classList.add(Ie),Q++},f=()=>{Q&&(document.removeEventListener("touchstart",a.start),document.removeEventListener("touchmove",c),Q--,Q||document.body.classList.remove(Ie))},b=()=>o()&&w(),I=()=>o()&&f();Ke(b),Re(I),Te(I),E(o,r=>{r?w():f()})}const ke=()=>{var e;const{scopeId:o}=((e=Be())==null?void 0:e.vnode)||{};return o?{[o]:""}:null},zt=N({},xt,{round:Boolean,position:L("center"),closeIcon:L("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:L("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Rt,Se]=ne("popup");var Tt=q({name:Rt,inheritAttrs:!1,props:zt,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:o,attrs:a,slots:t}){let l,c;const w=_(),f=_(),b=It(()=>e.show||!e.lazyRender),I=te(()=>{const C={zIndex:w.value};if(he(e.duration)){const T=e.position==="center"?"animationDuration":"transitionDuration";C[T]=`${e.duration}s`}return C}),r=()=>{l||(l=!0,w.value=e.zIndex!==void 0?+e.zIndex:Pt(),o("open"))},u=()=>{l&&be(e.beforeClose,{done(){l=!1,o("close"),o("update:show",!1)}})},v=C=>{o("clickOverlay",C),e.closeOnClickOverlay&&u()},y=()=>{if(e.overlay)return s(kt,j({show:e.show,class:e.overlayClass,zIndex:w.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},ke(),{onClick:v}),{default:t["overlay-content"]})},k=C=>{o("clickCloseIcon",C),u()},A=()=>{if(e.closeable)return s(X,{role:"button",tabindex:0,name:e.closeIcon,class:[Se("close-icon",e.closeIconPosition),Ae],classPrefix:e.iconPrefix,onClick:k},null)};let S;const M=()=>{S&&clearTimeout(S),S=setTimeout(()=>{o("opened")})},D=()=>o("closed"),g=C=>o("keydown",C),B=b(()=>{var C;const{round:T,position:n,safeAreaInsetTop:m,safeAreaInsetBottom:p}=e;return fe(s("div",j({ref:f,style:I.value,role:"dialog",tabindex:0,class:[Se({round:T,[n]:n}),{"van-safe-area-top":m,"van-safe-area-bottom":p}],onKeydown:g},a,ke()),[(C=t.default)==null?void 0:C.call(t),A()]),[[ge,e.show]])}),x=()=>{const{position:C,transition:T,transitionAppear:n}=e,m=C==="center"?"van-fade":`van-popup-slide-${C}`;return s(at,{name:T||m,appear:n,onAfterEnter:M,onAfterLeave:D},{default:B})};return E(()=>e.show,C=>{C&&!l&&(r(),a.tabindex===0&&we(()=>{var T;(T=f.value)==null||T.focus()})),!C&&l&&(l=!1,o("close"))}),le({popupRef:f}),pt(f,()=>e.show&&e.lockScroll),_e("popstate",()=>{e.closeOnPopstate&&(u(),c=!1)}),ye(()=>{e.show&&r()}),Je(()=>{c&&(o("update:show",!0),c=!1)}),Re(()=>{e.show&&e.teleport&&(u(),c=!0)}),Qe(et,()=>e.show),()=>e.teleport?s(tt,{to:e.teleport},{default:()=>[y(),x()]}):s(ot,null,[y(),x()])}});const $e=de(Tt);let ee=0;function Bt(e){e?(ee||document.body.classList.add("van-toast--unclickable"),ee++):ee&&(ee--,ee||document.body.classList.remove("van-toast--unclickable"))}const[_t,H]=ne("toast"),At=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Lt={icon:String,show:Boolean,type:L("text"),overlay:Boolean,message:V,iconSize:V,duration:lt(2e3),position:L("middle"),teleport:[String,Object],wordBreak:String,className:ae,iconPrefix:String,transition:L("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:ae,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:V};var Ye=q({name:_t,props:Lt,emits:["update:show"],setup(e,{emit:o,slots:a}){let t,l=!1;const c=()=>{const u=e.show&&e.forbidClick;l!==u&&(l=u,Bt(l))},w=u=>o("update:show",u),f=()=>{e.closeOnClick&&w(!1)},b=()=>clearTimeout(t),I=()=>{const{icon:u,type:v,iconSize:y,iconPrefix:k,loadingType:A}=e;if(u||v==="success"||v==="fail")return s(X,{name:u||v,size:y,class:H("icon"),classPrefix:k},null);if(v==="loading")return s(Ce,{class:H("loading"),size:y,type:A},null)},r=()=>{const{type:u,message:v}=e;if(a.message)return s("div",{class:H("text")},[a.message()]);if(he(v)&&v!=="")return u==="html"?s("div",{key:0,class:H("text"),innerHTML:String(v)},null):s("div",{class:H("text")},[v])};return E(()=>[e.show,e.forbidClick],c),E(()=>[e.show,e.type,e.message,e.duration],()=>{b(),e.show&&e.duration>0&&(t=setTimeout(()=>{w(!1)},e.duration))}),ye(c),nt(c),()=>s($e,j({class:[H([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:f,onClosed:b,"onUpdate:show":w},G(e,At)),{default:()=>[I(),r()]})}});function Ne(){const e=ve({show:!1}),o=l=>{e.show=l},a=l=>{N(e,l,{transitionAppear:!0}),o(!0)},t=()=>o(!1);return le({open:a,close:t,toggle:o}),{open:a,close:t,state:e,toggle:o}}function Ve(e){const o=it(e),a=document.createElement("div");return document.body.appendChild(a),{instance:o.mount(a),unmount(){o.unmount(),document.body.removeChild(a)}}}const Dt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let ce=[],Ut=!1,Oe=N({},Dt);const Et=new Map;function Ze(e){return st(e)?e:{message:e}}function Mt(){const{instance:e,unmount:o}=Ve({setup(){const a=_(""),{open:t,state:l,close:c,toggle:w}=Ne(),f=()=>{},b=()=>s(Ye,j(l,{onClosed:f,"onUpdate:show":w}),null);return E(a,I=>{l.message=I}),Be().render=b,{open:t,close:c,message:a}}});return e}function Ft(){if(!ce.length||Ut){const e=Mt();ce.push(e)}return ce[ce.length-1]}function $t(e={}){if(!Le)return{};const o=Ft(),a=Ze(e);return o.open(N({},Oe,Et.get(a.type||Oe.type),a)),o}const Xe=e=>o=>$t(N({type:e},Ze(o))),Yt=Xe("success"),Nt=Xe("fail");de(Ye);const Pe=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),Vt=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),me=ne("image-preview")[1],xe=2.6,Zt={src:String,show:Boolean,active:Number,minZoom:oe(V),maxZoom:oe(V),rootWidth:oe(Number),rootHeight:oe(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var Xt=q({props:Zt,emits:["scale","close","longPress"],setup(e,{emit:o,slots:a}){const t=ve({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),l=ze(),c=_(),w=_(),f=_(!1),b=_(!1);let I=0;const r=te(()=>{const{scale:i,moveX:d,moveY:h,moving:z,zooming:U,initializing:Y}=t,se={transitionDuration:U||z||Y?"0s":".3s"};return(i!==1||b.value)&&(se.transform=`matrix(${i}, 0, 0, ${i}, ${d}, ${h})`),se}),u=te(()=>{if(t.imageRatio){const{rootWidth:i,rootHeight:d}=e,h=f.value?d/t.imageRatio:i;return Math.max(0,(t.scale*h-i)/2)}return 0}),v=te(()=>{if(t.imageRatio){const{rootWidth:i,rootHeight:d}=e,h=f.value?d:i*t.imageRatio;return Math.max(0,(t.scale*h-d)/2)}return 0}),y=(i,d)=>{var h;if(i=Z(i,+e.minZoom,+e.maxZoom+1),i!==t.scale){const z=i/t.scale;if(t.scale=i,d){const U=Ue((h=c.value)==null?void 0:h.$el),Y={x:U.width*.5,y:U.height*.5},se=t.moveX-(d.x-U.left-Y.x)*(z-1),Ge=t.moveY-(d.y-U.top-Y.y)*(z-1);t.moveX=Z(se,-u.value,u.value),t.moveY=Z(Ge,-v.value,v.value)}else t.moveX=0,t.moveY=b.value?I:0;o("scale",{scale:i,index:e.active})}},k=()=>{y(1)},A=()=>{const i=t.scale>1?1:2;y(i,i===2||b.value?{x:l.startX.value,y:l.startY.value}:void 0)};let S,M,D,g,B,x,C,T,n=!1;const m=i=>{const{touches:d}=i;if(S=d.length,S===2&&e.disableZoom)return;const{offsetX:h}=l;l.start(i),M=t.moveX,D=t.moveY,T=Date.now(),n=!1,t.moving=S===1&&(t.scale!==1||b.value),t.zooming=S===2&&!h.value,t.zooming&&(g=t.scale,B=Pe(d))},p=i=>{const{touches:d}=i;if(l.move(i),t.moving){const{deltaX:h,deltaY:z}=l,U=h.value+M,Y=z.value+D;if((e.vertical?l.isVertical()&&Math.abs(Y)>v.value:l.isHorizontal()&&Math.abs(U)>u.value)&&!n){t.moving=!1;return}n=!0,re(i,!0),t.moveX=Z(U,-u.value,u.value),t.moveY=Z(Y,-v.value,v.value)}if(t.zooming&&(re(i,!0),d.length===2)){const h=Pe(d),z=g*h/B;x=Vt(d),y(z,x)}},O=i=>{var d;const h=(d=w.value)==null?void 0:d.$el;if(!h)return;const z=h.firstElementChild,U=i.target===h,Y=z==null?void 0:z.contains(i.target);!e.closeOnClickImage&&Y||!e.closeOnClickOverlay&&U||o("close")},F=i=>{if(S>1)return;const d=Date.now()-T,h=250;l.isTap.value&&(d<h?e.doubleScale?C?(clearTimeout(C),C=null,A()):C=setTimeout(()=>{O(i),C=null},h):O(i):d>ut&&o("longPress"))},$=i=>{let d=!1;if((t.moving||t.zooming)&&(d=!0,t.moving&&M===t.moveX&&D===t.moveY&&(d=!1),!i.touches.length)){t.zooming&&(t.moveX=Z(t.moveX,-u.value,u.value),t.moveY=Z(t.moveY,-v.value,v.value),t.zooming=!1),t.moving=!1,M=0,D=0,g=1,t.scale<1&&k();const h=+e.maxZoom;t.scale>h&&y(h,x)}re(i,d),F(i),l.reset()},ie=()=>{const{rootWidth:i,rootHeight:d}=e,h=d/i,{imageRatio:z}=t;f.value=t.imageRatio>h&&z<xe,b.value=t.imageRatio>h&&z>=xe,b.value&&(I=(z*i-d)/2,t.moveY=I,t.initializing=!0,rt(()=>{t.initializing=!1})),k()},J=i=>{const{naturalWidth:d,naturalHeight:h}=i.target;t.imageRatio=h/d,ie()};return E(()=>e.active,k),E(()=>e.show,i=>{i||k()}),E(()=>[e.rootWidth,e.rootHeight],ie),_e("touchmove",p,{target:te(()=>{var i;return(i=w.value)==null?void 0:i.$el})}),le({resetScale:k}),()=>{const i={loading:()=>s(Ce,{type:"spinner"},null)};return s(ct,{ref:w,class:me("swipe-item"),onTouchstartPassive:m,onTouchend:$,onTouchcancel:$},{default:()=>[a.image?s("div",{class:me("image-wrap")},[a.image({src:e.src,onLoad:J,style:r.value})]):s(De,{ref:c,src:e.src,fit:"contain",class:me("image",{vertical:f.value}),style:r.value,onLoad:J},i)]})}}});const[jt,W]=ne("image-preview"),Ht=["show","teleport","transition","overlayStyle","closeOnPopstate"],Wt={show:Boolean,loop:R,images:Ee(),minZoom:K(1/3),maxZoom:K(3),overlay:R,vertical:Boolean,closeable:Boolean,showIndex:R,className:ae,closeIcon:L("clear"),transition:String,beforeClose:Function,doubleScale:R,overlayClass:ae,overlayStyle:Object,swipeDuration:K(300),startPosition:K(0),showIndicators:Boolean,closeOnPopstate:R,closeOnClickImage:R,closeOnClickOverlay:R,closeIconPosition:L("top-right"),teleport:[String,Object]};var je=q({name:jt,props:Wt,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:o,slots:a}){const t=_(),l=_(),c=ve({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),w=()=>{if(t.value){const g=Ue(t.value.$el);c.rootWidth=g.width,c.rootHeight=g.height,t.value.resize()}},f=g=>o("scale",g),b=g=>o("update:show",g),I=()=>{be(e.beforeClose,{args:[c.active],done:()=>b(!1)})},r=g=>{g!==c.active&&(c.active=g,o("change",g))},u=()=>{if(e.showIndex)return s("div",{class:W("index")},[a.index?a.index({index:c.active}):`${c.active+1} / ${e.images.length}`])},v=()=>{if(a.cover)return s("div",{class:W("cover")},[a.cover()])},y=()=>{c.disableZoom=!0},k=()=>{c.disableZoom=!1},A=()=>s(mt,{ref:t,lazyRender:!0,loop:e.loop,class:W("swipe"),vertical:e.vertical,duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:r,onDragEnd:k,onDragStart:y},{default:()=>[e.images.map((g,B)=>s(Xt,{ref:x=>{B===c.active&&(l.value=x)},src:g,show:e.show,active:c.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:c.rootWidth,rootHeight:c.rootHeight,disableZoom:c.disableZoom,doubleScale:e.doubleScale,closeOnClickImage:e.closeOnClickImage,closeOnClickOverlay:e.closeOnClickOverlay,vertical:e.vertical,onScale:f,onClose:I,onLongPress:()=>o("longPress",{index:B})},{image:a.image}))]}),S=()=>{if(e.closeable)return s(X,{role:"button",name:e.closeIcon,class:[W("close-icon",e.closeIconPosition),Ae],onClick:I},null)},M=()=>o("closed"),D=(g,B)=>{var x;return(x=t.value)==null?void 0:x.swipeTo(g,B)};return le({resetScale:()=>{var g;(g=l.value)==null||g.resetScale()},swipeTo:D}),ye(w),E([dt,vt],w),E(()=>e.startPosition,g=>r(+g)),E(()=>e.show,g=>{const{images:B,startPosition:x}=e;g?(r(+x),we(()=>{w(),D(+x,{immediate:!0})})):o("close",{index:c.active,url:B[c.active]})}),()=>s($e,j({class:[W(),e.className],overlayClass:[W("overlay"),e.overlayClass],onClosed:M,"onUpdate:show":b},G(e,Ht)),{default:()=>[S(),A(),u(),v()]})}});let ue;const Gt={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function Kt(){({instance:ue}=Ve({setup(){const{state:e,toggle:o}=Ne(),a=()=>{e.images=[]};return()=>s(je,j(e,{onClosed:a,"onUpdate:show":o}),null)}}))}const qt=(e,o=0)=>{if(Le)return ue||Kt(),e=Array.isArray(e)?{images:e,startPosition:o}:e,ue.open(N({},Gt,e)),ue};de(je);const[Jt,P,Qt]=ne("uploader");function pe(e,o){return new Promise(a=>{if(o==="file"){a();return}const t=new FileReader;t.onload=l=>{a(l.target.result)},o==="dataUrl"?t.readAsDataURL(e):o==="text"&&t.readAsText(e)})}function He(e,o){return Me(e).some(a=>a.file?ft(o)?o(a.file):a.file.size>+o:!1)}function eo(e,o){const a=[],t=[];return e.forEach(l=>{He(l,o)?t.push(l):a.push(l)}),{valid:a,invalid:t}}const to=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,oo=e=>to.test(e);function We(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?oo(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var ao=q({props:{name:V,item:oe(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:o,slots:a}){const t=()=>{const{status:r,message:u}=e.item;if(r==="uploading"||r==="failed"){const v=r==="failed"?s(X,{name:"close",class:P("mask-icon")},null):s(Ce,{class:P("loading")},null),y=he(u)&&u!=="";return s("div",{class:P("mask")},[v,y&&s("div",{class:P("mask-message")},[u])])}},l=r=>{const{name:u,item:v,index:y,beforeDelete:k}=e;r.stopPropagation(),be(k,{args:[v,{name:u,index:y}],done:()=>o("delete")})},c=()=>o("preview"),w=()=>o("reupload"),f=()=>{if(e.deletable&&e.item.status!=="uploading"){const r=a["preview-delete"];return s("div",{role:"button",class:P("preview-delete",{shadow:!r}),tabindex:0,"aria-label":Qt("delete"),onClick:l},[r?r():s(X,{name:"cross",class:P("preview-delete-icon")},null)])}},b=()=>{if(a["preview-cover"]){const{index:r,item:u}=e;return s("div",{class:P("preview-cover")},[a["preview-cover"](N({index:r},u))])}},I=()=>{const{item:r,lazyLoad:u,imageFit:v,previewSize:y,reupload:k}=e;return We(r)?s(De,{fit:v,src:r.objectUrl||r.content||r.url,class:P("preview-image"),width:Array.isArray(y)?y[0]:y,height:Array.isArray(y)?y[1]:y,lazyLoad:u,onClick:k?w:c},{default:b}):s("div",{class:P("file"),style:Fe(e.previewSize)},[s(X,{class:P("file-icon"),name:"description"},null),s("div",{class:[P("file-name"),"van-ellipsis"]},[r.file?r.file.name:r.url]),b()])};return()=>s("div",{class:P("preview")},[I(),t(),f()])}});const no={name:K(""),accept:L("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:K(1/0),imageFit:L("cover"),resultType:L("dataUrl"),uploadIcon:L("photograph"),uploadText:String,deletable:R,reupload:Boolean,afterRead:Function,showUpload:R,modelValue:Ee(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:R,previewOptions:Object,previewFullImage:R,maxSize:{type:[Number,String,Function],default:1/0}};var lo=q({name:Jt,props:no,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:o,slots:a}){const t=_(),l=[],c=_(-1),w=_(!1),f=(n=e.modelValue.length)=>({name:e.name,index:n}),b=()=>{t.value&&(t.value.value="")},I=n=>{if(b(),He(n,e.maxSize))if(Array.isArray(n)){const m=eo(n,e.maxSize);if(n=m.valid,o("oversize",m.invalid,f()),!n.length)return}else{o("oversize",n,f());return}if(n=ve(n),c.value>-1){const m=[...e.modelValue];m.splice(c.value,1,n),o("update:modelValue",m),c.value=-1}else o("update:modelValue",[...e.modelValue,...Me(n)]);e.afterRead&&e.afterRead(n,f())},r=n=>{const{maxCount:m,modelValue:p,resultType:O}=e;if(Array.isArray(n)){const F=+m-p.length;n.length>F&&(n=n.slice(0,F)),Promise.all(n.map($=>pe($,O))).then($=>{const ie=n.map((J,i)=>{const d={file:J,status:"",message:"",objectUrl:URL.createObjectURL(J)};return $[i]&&(d.content=$[i]),d});I(ie)})}else pe(n,O).then(F=>{const $={file:n,status:"",message:"",objectUrl:URL.createObjectURL(n)};F&&($.content=F),I($)})},u=n=>{const{files:m}=n.target;if(e.disabled||!m||!m.length)return;const p=m.length===1?m[0]:[].slice.call(m);if(e.beforeRead){const O=e.beforeRead(p,f());if(!O){b();return}if(ht(O)){O.then(F=>{r(F||p)}).catch(b);return}}r(p)};let v;const y=()=>o("closePreview"),k=n=>{if(e.previewFullImage){const m=e.modelValue.filter(We),p=m.map(O=>(O.objectUrl&&!O.url&&O.status!=="failed"&&(O.url=O.objectUrl,l.push(O.url)),O.url)).filter(Boolean);v=qt(N({images:p,startPosition:m.indexOf(n),onClose:y},e.previewOptions))}},A=()=>{v&&v.close()},S=(n,m)=>{const p=e.modelValue.slice(0);p.splice(m,1),o("update:modelValue",p),o("delete",n,f(m))},M=n=>{w.value=!0,c.value=n,we(()=>T())},D=()=>{w.value||(c.value=-1),w.value=!1},g=(n,m)=>{const p=["imageFit","deletable","reupload","previewSize","beforeDelete"],O=N(G(e,p),G(n,p,!0));return s(ao,j({item:n,index:m,onClick:()=>o(e.reupload?"clickReupload":"clickPreview",n,f(m)),onDelete:()=>S(n,m),onPreview:()=>k(n),onReupload:()=>M(m)},G(e,["name","lazyLoad"]),O),G(a,["preview-cover","preview-delete"]))},B=()=>{if(e.previewImage)return e.modelValue.map(g)},x=n=>o("clickUpload",n),C=()=>{if(e.modelValue.length>=+e.maxCount&&!e.reupload)return;const n=e.modelValue.length>=+e.maxCount&&e.reupload,m=e.readonly?null:s("input",{ref:t,type:"file",class:P("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&c.value===-1,disabled:e.disabled,onChange:u,onClick:D},null);return a.default?fe(s("div",{class:P("input-wrapper"),onClick:x},[a.default(),m]),[[ge,!n]]):fe(s("div",{class:P("upload",{readonly:e.readonly}),style:Fe(e.previewSize),onClick:x},[s(X,{name:e.uploadIcon,class:P("upload-icon")},null),e.uploadText&&s("span",{class:P("upload-text")},[e.uploadText]),m]),[[ge,e.showUpload&&!n]])},T=()=>{t.value&&!e.disabled&&t.value.click()};return Te(()=>{l.forEach(n=>URL.revokeObjectURL(n))}),le({chooseFile:T,closeImagePreview:A}),gt(()=>e.modelValue),()=>s("div",{class:P()},[s("div",{class:P("wrapper",{disabled:e.disabled})},[B(),C()])])}});const io=de(lo),so={class:"add-img"},co={__name:"AddImg",setup(e){const o=_([]),a=t=>{t.status="uploading",t.message="上传中...",St.post("https://www.imgtp.com/api/upload",{image:t.file},{headers:{"content-type":"multipart/form-data",token:"8f61c7bfe77e125d54e13ee754d00a78"}}).then(l=>{l.data.data.url!==""?(Yt("上传成功"),t.status="done",t.message="上传成功"):Nt("上传失败")})};return(t,l)=>{const c=Ct,w=io;return yt(),bt("div",so,[s(c,{title:"添加图片","left-text":"返回","left-arrow":"",onClickLeft:l[0]||(l[0]=()=>t.$router.go(-1))}),s(w,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=f=>o.value=f),multiple:!0,"max-count":1,"after-read":a,"preview-size":"150px",class:"uploader",ref:"file","preview-image":!0,"preview-full-image":!0,capture:"camera","image-fit":"cover"},null,8,["modelValue"])])}}},vo=wt(co,[["__scopeId","data-v-86b82027"]]);export{vo as default};
